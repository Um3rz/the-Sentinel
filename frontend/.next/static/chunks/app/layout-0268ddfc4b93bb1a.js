(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9675:function(t,e,n){Promise.resolve().then(n.t.bind(n,1034,23)),Promise.resolve().then(n.bind(n,242)),Promise.resolve().then(n.t.bind(n,3054,23))},6463:function(t,e,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},357:function(t,e,n){"use strict";var r,o;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(t){!function(){var e={229:function(t){var e,n,r,o=t.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l=[],s=!1,c=-1;function f(){s&&r&&(s=!1,r.length?l=r.concat(l):c=-1,l.length&&h())}function h(){if(!s){var t=u(f);s=!0;for(var e=l.length;e;){for(r=l,l=[];++c<e;)r&&r[c].run();c=-1,e=l.length}r=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||s||u(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}},a=!0;try{e[t](i,i.exports,r),a=!1}finally{a&&delete n[t]}return i.exports}r.ab="//";var o=r(229);t.exports=o}()},242:function(t,e,n){"use strict";n.d(e,{AuthProvider:function(){return c},a:function(){return f}});var r,o=n(7437),i=n(2265),a=n(6463),u=n(357);let l=(0,i.createContext)(void 0),s=null!==(r=u.env.NEXT_PUBLIC_API_URL)&&void 0!==r?r:"http://localhost:8000";function c(t){let{children:e}=t,[n,r]=(0,i.useState)(null),[u,c]=(0,i.useState)(null),[f,h]=(0,i.useState)(!0),d=(0,a.useRouter)();(0,i.useEffect)(()=>{let t=localStorage.getItem("sentinel_token");t?c(t):h(!1)},[]);let p=(0,i.useCallback)(async t=>{try{let e=await fetch("".concat(s,"/api/v1/auth/me"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();r(t)}else localStorage.removeItem("sentinel_token"),c(null),r(null)}catch(t){}finally{h(!1)}},[]);(0,i.useEffect)(()=>{u&&p(u)},[u,p]);let v=async(t,e)=>{let n=await fetch("".concat(s,"/api/v1/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(!n.ok){var r;throw Error(null!==(r=(await n.json().catch(()=>({detail:"Login failed"}))).detail)&&void 0!==r?r:"Login failed")}let o=await n.json();localStorage.setItem("sentinel_token",o.access_token),c(o.access_token),d.push("/dashboard")},m=async(t,e,n)=>{let r=await fetch("".concat(s,"/api/v1/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e,full_name:n||null})});if(!r.ok){var o;throw Error(null!==(o=(await r.json().catch(()=>({detail:"Registration failed"}))).detail)&&void 0!==o?o:"Registration failed")}await v(t,e)};return(0,o.jsx)(l.Provider,{value:{user:n,token:u,isLoading:f,login:v,register:m,loginWithGithub:()=>{window.location.href="".concat(s,"/api/v1/auth/github")},logout:()=>{localStorage.removeItem("sentinel_token"),c(null),r(null),d.push("/login")}},children:e})}function f(){let t=(0,i.useContext)(l);if(!t)throw Error("useAuth must be used within an AuthProvider");return t}},3054:function(){},1034:function(t){t.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(t){t.O(0,[6,971,23,744],function(){return t(t.s=9675)}),_N_E=t.O()}]);